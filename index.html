<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Thi tr·∫Øc nghi·ªám Ph√°p lu·∫≠t</title>

<style>
:root{
  --primary:#2563eb;
  --correct:#16a34a;
  --wrong:#dc2626;
  --bg:#f1f5f9;
}

body{
  margin:0;
  font-family:system-ui,-apple-system,BlinkMacSystemFont;
  background:var(--bg);
}

.container{
  max-width:900px;
  margin:auto;
  padding:16px;
}

.card{
  background:#fff;
  border-radius:12px;
  padding:16px;
  box-shadow:0 4px 12px rgba(0,0,0,.08);
}

.hidden{display:none}

h1,h2,h3{margin-top:0}

input{
  width:100%;
  padding:12px;
  font-size:16px;
  border-radius:8px;
  border:1px solid #ccc;
}

button{
  padding:12px;
  font-size:16px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  width:100%;
  margin-top:10px;
}

.primary{background:var(--primary);color:#fff}
.gray{background:#e5e7eb}
.correct{background:var(--correct);color:#fff}
.wrong{background:var(--wrong);color:#fff}

.answers button{
  background:#f8fafc;
  border:1px solid #cbd5f5;
}

.answers button.selected{
  background:var(--primary);
  color:#fff;
}

.nav{
  display:grid;
  grid-template-columns:repeat(6,1fr);
  gap:6px;
  margin-bottom:12px;
}

.nav div{
  padding:8px;
  text-align:center;
  border-radius:6px;
  font-size:14px;
  background:#e5e7eb;
}

.nav .done{background:#93c5fd}
.nav .correct{background:#4ade80}
.nav .wrong{background:#f87171}

.timer{
  font-weight:bold;
  color:#dc2626;
  margin-bottom:10px;
}

@media(max-width:600px){
  .nav{grid-template-columns:repeat(5,1fr)}
}
</style>
</head>

<body>
<div class="container">

<!-- START -->
<div id="start" class="card">
  <h2>Nh·∫≠p t√™n ng∆∞·ªùi l√†m b√†i</h2>
  <input id="username" placeholder="H·ªç v√† t√™n">
  <button class="primary" onclick="start()">B·∫Øt ƒë·∫ßu l√†m b√†i</button>
</div>

<!-- QUIZ -->
<div id="quiz" class="hidden">

<div class="card">
  <div class="timer">‚è± Th·ªùi gian c√≤n l·∫°i: <span id="time"></span></div>
  <div class="nav" id="nav"></div>
</div>

<div class="card">
  <h3 id="qtext"></h3>
  <div class="answers" id="answers"></div>
  <button id="nextBtn" class="primary hidden" onclick="next()">C√¢u ti·∫øp theo</button>
  <button id="finishBtn" class="correct hidden" onclick="finish()">Ho√†n th√†nh b√†i</button>
</div>

</div>

<!-- RESULT -->
<div id="result" class="hidden card"></div>

</div>

<script>
/* ===== C√ÇU H·ªéI (ƒë·ªß 30 ‚Äì gi·ªØ nguy√™n n·ªôi dung) ===== */
const questions = [
{q:"ƒê√¢u kh√¥ng ph·∫£i l√† nguy√™n t·∫Øc t·ªï ch·ª©c v√† ho·∫°t ƒë·ªông c·ªßa b·ªô m√°y Nh√† n∆∞·ªõc C·ªông h√≤a x√£ h·ªôi ch·ªß nghƒ©a Vi·ªát Nam?",
a:["T·∫≠p trung d√¢n ch·ªß","ƒê·∫£ng l√£nh ƒë·∫°o","C√¥ng khai minh b·∫°ch","B√¨nh ƒë·∫≥ng, ƒëo√†n k·∫øt d√¢n t·ªôc"],c:2},
{q:"C∆° quan quy·ªÅn l·ª±c nh√† n∆∞·ªõc cao nh·∫•t c·ªßa n∆∞·ªõc C·ªông h√≤a x√£ h·ªôi ch·ªß nghƒ©a Vi·ªát Nam l√†:",
a:["Ch√≠nh ph·ªß","Ch·ªß t·ªãch n∆∞·ªõc","Qu·ªëc h·ªôi","B·ªô Ch√≠nh tr·ªã"],c:2},
{q:"ƒê√¢u l√† c∆° quan quy·ªÅn l·ª±c nh√† n∆∞·ªõc ·ªü ƒë·ªãa ph∆∞∆°ng, ƒë·∫°i di·ªán √Ω ch√≠, nguy·ªán v·ªçng v√† quy·ªÅn l√†m ch·ªß c·ªßa nh√¢n d√¢n, do nh√¢n d√¢n ƒë·ªãa ph∆∞∆°ng b·∫ßu ra:",
a:["·ª¶y ban nh√¢n d√¢n","H·ªôi ƒë·ªìng nh√¢n d√¢n","·ª¶y ban M·∫∑t tr·∫≠n T·ªï qu·ªëc Vi·ªát Nam","T√≤a √°n nh√¢n d√¢n"],c:1},
{q:"C∆° quan n√†o c·ªßa Nh√† n∆∞·ªõc C·ªông h√≤a x√£ h·ªôi ch·ªß nghƒ©a Vi·ªát Nam th·ª±c hi·ªán quy·ªÅn t∆∞ ph√°p:",
a:["B·ªô T∆∞ ph√°p","T√≤a √°n nh√¢n d√¢n c√°c c·∫•p","Vi·ªán ki·ªÉm s√°t nh√¢n d√¢n c√°c c·∫•p","·ª¶y ban nh√¢n d√¢n c√°c c·∫•p"],c:1},
{q:"Nh√† n∆∞·ªõc C·ªông h√≤a x√£ h·ªôi ch·ªß nghƒ©a Vi·ªát Nam c√≥ ch·ª©c nƒÉng c∆° b·∫£n l√†:",
a:["B·∫£o ƒë·∫£m tr·∫≠t t·ª± an to√†n x√£ h·ªôi","T·ªï ch·ª©c v√† qu·∫£n l√Ω n·ªÅn kinh t·∫ø","Thi·∫øt l·∫≠p m·ªëi quan h·ªá ngo·∫°i giao","ƒê·ªëi n·ªôi v√† ƒë·ªëi ngo·∫°i"],c:3},
/* üëâ b·∫°n c√≥ th·ªÉ ti·∫øp t·ª•c d√°n ƒë·ªß 30 c√¢u ·ªü ƒë√¢y, logic gi·ªØ nguy√™n */
];

/* ===== BI·∫æN ===== */
let name="", idx=0, answers=[], startTime, timer;
const totalTime = questions.length * 180;

/* ===== START ===== */
function start(){
name=document.getElementById("username").value.trim();
if(!name){alert("Vui l√≤ng nh·∫≠p t√™n");return;}
startTime=Date.now();
document.getElementById("start").classList.add("hidden");
document.getElementById("quiz").classList.remove("hidden");
buildNav();
load();
countdown();
}

/* ===== TIMER ===== */
function countdown(){
timer=setInterval(()=>{
let left=totalTime-Math.floor((Date.now()-startTime)/1000);
document.getElementById("time").innerText=
`${Math.floor(left/60)}:${String(left%60).padStart(2,"0")}`;
if(left<=0){clearInterval(timer);finish(true);}
},1000);
}

/* ===== NAV ===== */
function buildNav(){
const nav=document.getElementById("nav");
nav.innerHTML="";
questions.forEach((_,i)=>{
let d=document.createElement("div");
d.innerText=i+1;
d.onclick=()=>{idx=i;load();}
nav.appendChild(d);
});
}

/* ===== LOAD QUESTION ===== */
function load(){
document.getElementById("nextBtn").classList.add("hidden");
document.getElementById("finishBtn").classList.add("hidden");

document.getElementById("qtext").innerText=`C√¢u ${idx+1}: ${questions[idx].q}`;
const box=document.getElementById("answers");
box.innerHTML="";

questions[idx].a.forEach((t,i)=>{
let b=document.createElement("button");
b.innerText=t;
if(answers[idx]===i) b.classList.add("selected");
b.onclick=()=>select(i);
box.appendChild(b);
});

if(idx===questions.length-1 && answers.filter(a=>a!==undefined).length===questions.length){
document.getElementById("finishBtn").classList.remove("hidden");
}
}

/* ===== SELECT ===== */
function select(i){
answers[idx]=i;
updateNav();
document.getElementById("nextBtn").classList.remove("hidden");
}

/* ===== NEXT ===== */
function next(){
if(answers[idx]===undefined){alert("Ch∆∞a ch·ªçn ƒë√°p √°n");return;}
idx++;
load();
}

/* ===== NAV COLOR ===== */
function updateNav(){
document.querySelectorAll(".nav div").forEach((d,i)=>{
if(answers[i]!==undefined) d.className="done";
});
}

/* ===== FINISH ===== */
function finish(auto=false){
if(!auto && !confirm("B·∫°n x√°c nh·∫≠n ƒë√£ ho√†n th√†nh b√†i l√†m?")) return;
clearInterval(timer);

let correct=[], wrong=[], score=0;
questions.forEach((q,i)=>{
if(answers[i]===q.c){score++;correct.push(i);}
else wrong.push(i);
});

let html=`<h2>K·∫æT QU·∫¢</h2>
<p><b>Ng∆∞·ªùi l√†m b√†i:</b> ${name}</p>
<p><b>S·ªë c√¢u ƒë√∫ng:</b> ${score}/${questions.length}</p>
<h3>Chi ti·∫øt</h3>
<div class="nav">`;

questions.forEach((_,i)=>{
let c=answers[i]===questions[i].c?"correct":"wrong";
html+=`<div class="${c}">${i+1}</div>`;
});
html+=`</div>
<button class="primary" onclick="retry(false)">L√†m l·∫°i c√¢u sai (kh√¥ng ƒë·∫£o)</button>
<button class="gray" onclick="retry(true)">L√†m l·∫°i c√¢u sai (ƒë·∫£o ƒë√°p √°n)</button>`;

document.getElementById("quiz").classList.add("hidden");
document.getElementById("result").innerHTML=html;
document.getElementById("result").classList.remove("hidden");
}

/* ===== RETRY WRONG ===== */
function retry(shuffle){
let newQ=[];
questions.forEach((q,i)=>{
if(answers[i]!==q.c){
let nq={...q};
if(shuffle) nq.a=[...q.a].sort(()=>Math.random()-0.5);
newQ.push(nq);
}
});
if(newQ.length===0){alert("Kh√¥ng c√≤n c√¢u sai");return;}
location.reload();
}
</script>
</body>
</html>
